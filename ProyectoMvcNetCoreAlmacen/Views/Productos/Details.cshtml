@model NugetProyectoAlmacen.Models.Producto

@{
	var maxStock = 100; // Ajusta este valor según el máximo esperado
	var stockPercentage = Math.Min((Model.Stock * 100) / maxStock, 100);
	var progressColor = Model.Stock <= 3 ? "#dc3545" : (Model.Stock >= 4 ? "#28a745" : "#ffc107");
}

<section class="features2 cid-sgSyF0EE4Z" id="features2-d">
	<div class="container">
		<div class="card border-0 shadow-sm">
			<div class="card-header bg-secondary text-white">
				<div class="d-flex justify-content-between align-items-center">
					<h4 class="mb-0"><i class="fas fa-box me-2"></i> Detalles del Producto</h4>
					<span class="badge bg-light text-dark"><i class="fas fa-barcode mr-1"></i> Num. artículo @Model.IdProducto</span>
				</div>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-lg-4 mb-4 mb-lg-0">
						<div class="imagen-producto-contenedor border p-2">
							<img src="@Url.Content("~/imagenes/" + Model.Imagen)"
								 class="img-fluid"
								 onerror="this.onerror=null;this.src='https://static.vecteezy.com/system/resources/previews/005/720/408/non_2x/crossed-image-icon-picture-not-available-delete-picture-symbol-free-vector.jpg';"
								 alt="Imagen del producto"
								 title="@Model.Nombre">
						</div>

					</div>
					<div class="col-lg-8">
						<h3 class="producto-nombre mb-3 text-dark">@Model.Nombre</h3>
						<hr>
						<div class="row">
							<div class="col-md-6">
								<table class="table table-bordered table-sm">
									<tbody>
										<tr class="table-secondary">
											<th colspan="2">Datos básicos</th>
										</tr>
										<tr>
											<th><i class="fas fa-barcode me-2"></i> Código</th>
											<td>@Model.IdProducto</td>
										</tr>
										<tr>
											<th><i class="fas fa-tag me-2"></i> Marca</th>
											<td>@Model.Marca</td>
										</tr>
										<tr>
											<th><i class="fas fa-solid fa-box-open"></i> Modelo</th>
											<td>@Model.Modelo</td>
										</tr>
										<tr>
											<th><i class="fas fa-solid fa-euro-sign me-2"></i> Precio</th>
											<td class="text-primary">@Model.Precio €</td>
										</tr>

									</tbody>
								</table>
							</div>
							<div class="col-md-6">
								<table class="table table-bordered table-sm">
									<tbody>
										<tr class="table-secondary">
											<th colspan="2">Inventario</th>
										</tr>
										<tr>
											<th><i class="fas fa-boxes me-2"></i> Stock</th>
											<td>
												<div class="d-flex align-items-center" style="gap: 0.5rem;">
													<span class="me-3">@Model.Stock</span>
													<div class="progress flex-grow-1" style="height:10px;">
														<div class="progress-bar"
															 role="progressbar"
															 style="width: @stockPercentage%; background-color: @progressColor;">
														</div>
													</div>
												</div>
											</td>
										</tr>
										<tr>
											<th><i class="fas fa-solid fa-toggle-on me-2"></i> Estado</th>
											<td>
												<span style="background-color: @(Model.Estado ? "#28a745" : "#e61919")" class="badge">
													@(Model.Estado ? "Activo" : "Inactivo")
												</span>
											</td>
										</tr>
										<tr>
											<th><i class="fas fa-truck me-2"></i> Proveedor</th>
											<td>@Model.Proveedor.Nombre</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>

						<div class="mt-3">
							<div class="card">
								<div class="card-header bg-light">
									<i class="fas fa-align-left me-2"></i><strong> Descripción del producto</strong>
								</div>
								<div class="card-body">
									<p>@Model.Descripcion</p>
								</div>
							</div>
						</div>

						<div class="mt-4">
							<div class="d-flex justify-content-between">
								<div>
									<a href="javascript:history.back()" class="btn btn-secondary">
										<i class="fas fa-arrow-left"></i>
										<span style="margin-left: 8px;">Volver</span>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
<style>
	.almacen-producto-detalle {
		background-color: #f5f5f5;
	}

	.imagen-producto-contenedor {
		background-color: white;
		height: 250px;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;
	}

		.imagen-producto-contenedor img {
			max-height: 230px;
			object-fit: contain;
		}

	.table th {
		background-color: #f8f9fa;
	}

	.text-monospace {
		font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
		font-weight: 600;
	}

	.progress {
		background-color: #e9ecef;
	}

	.card-header {
		font-weight: 500;
	}
</style>